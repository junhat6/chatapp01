# マッチングシステム ドキュメント

このディレクトリには、マッチング募集機能の実装に関する詳細なドキュメントが含まれています。

## ドキュメント一覧

### 1. [実装ドキュメント](./matching-system-implementation.md)

マッチング募集機能の現在の実装について詳細に説明したドキュメントです。

**内容:**

- システム概要と主要機能
- 技術スタック（フロントエンド・バックエンド）
- データモデルとエンティティ
- フロントエンド実装詳細（Pinia Store、API サービス、コンポーネント）
- バックエンド実装詳細（コントローラー、サービス、リポジトリ）
- セキュリティ・バリデーション
- パフォーマンス最適化
- 今後の拡張予定

### 2. [シーケンス図](./matching-system-sequence-diagrams.md)

マッチングシステムの主要なフローを視覚的に表現したシーケンス図のコレクションです。

**含まれるフロー:**

- 募集作成フロー
- 募集一覧表示・検索フロー
- 応募フロー
- 応募承認フロー（ホスト側）
- 待機室参加フロー
- 募集確定・チャットルーム移行フロー
- エラーハンドリングフロー
- 応募制限チェックフロー
- リアルタイム更新フロー

### 3. [API 仕様書](./matching-api-specification.md)

マッチングシステムの完全な API 仕様を定義したドキュメントです。

**内容:**

- 基本情報と共通レスポンス形式
- 募集関連 API（作成、一覧取得、詳細取得、更新、キャンセル）
- 応募関連 API（応募、一覧取得、ステータス更新、取り消し）
- 待機室関連 API（情報取得、参加）
- チャット関連 API（ルーム情報、メッセージ送信）
- 統合 API（一括処理）
- 列挙型定義
- エラーコード一覧
- レート制限
- WebSocket API

## 主要機能の概要

### 募集作成機能

- ホストがアトラクション、日時、最大参加者数を指定して募集を作成
- 募集と同時に待機室が自動作成される
- 募集ステータス管理（OPEN, WAITING, CONFIRMED, CLOSED, EXPIRED）

### 募集一覧・検索機能

- アクティブな募集の一覧表示
- アトラクション、参加者数、日付での絞り込み検索
- 募集状況のリアルタイム表示

### 応募機能

- **参加者は最大 1 つの募集にのみ応募可能**
- **メッセージ入力は不要（シンプルな応募）**
- 応募ステータス管理（PENDING, ACCEPTED, REJECTED）

### 待機室・チャット機能

- 承認された参加者は待機室に参加可能
- リアルタイムチャット機能
- 募集確定後にチャットルームに移行

## 技術スタック

### フロントエンド

- **フレームワーク**: Vue 3 + TypeScript
- **状態管理**: Pinia
- **UI ライブラリ**: Naive UI
- **HTTP 通信**: Axios
- **ルーティング**: Vue Router

### バックエンド

- **フレームワーク**: Spring Boot + Java
- **データベース**: PostgreSQL
- **認証**: JWT
- **WebSocket**: リアルタイム通信

## 重要な制約事項

1. **応募制限**: ユーザーは一度に 1 つの募集にしか応募できません
2. **メッセージ不要**: 応募時のメッセージ入力は不要です
3. **日時制限**: 募集日時は現在時刻より未来である必要があります
4. **参加者数制限**: 募集の参加者数は 2-8 人の範囲です

## 開発・運用に関する注意点

1. **バリデーション**: フロントエンドとバックエンドの両方でバリデーションを実装
2. **エラーハンドリング**: ユーザーフレンドリーなエラーメッセージを表示
3. **セキュリティ**: JWT 認証と適切な権限チェックを実装
4. **パフォーマンス**: 不要な API 呼び出しを削減し、効率的なデータ取得を実装

## 今後の拡張予定

- 通知機能（メール・プッシュ通知）
- 評価・レビュー機能
- 写真共有機能
- キャッシュ機能の導入
- レート制限の実装
- 監査ログの実装

これらのドキュメントは、マッチングシステムの開発、保守、拡張に必要な情報を提供します。実装の詳細から API 仕様まで、包括的な情報が含まれています。
